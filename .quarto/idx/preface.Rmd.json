{"title":"Preface","markdown":{"headingText":"Preface","headingAttr":{"id":"sec-preface","classes":["unnumbered"],"keyvalue":[]},"containsRefs":false,"markdown":"\n```{r, echo = FALSE}\nsource(\"common.R\")\n```\n\n欢迎来到 R Packages 的第二版！如果您熟悉第一版，本前言描述了主要变化，以便您可以将阅读重点放在新领域。\n\n此版本有几个主要目标：\n\n-   更新以反映 devtools 包中的变化，特别是它 [\"conscious uncoupling\"](https://www.tidyverse.org/articles/2018/10/devtools-2-0-0/#conscious-uncoupling) 成一组更小、更集中的包。\n\n-   扩大工作流程和流程的覆盖范围，同时展示构成 R 包的所有重要移动部件。\n\n-   涵盖全新主题，例如 package websites 和 GitHub Actions。\n\n所有内容均已完全修改和更新。许多章节都是新增或重新组织的，其中一些章节已被删除：\n\n-   新的 @sec-whole-game，\"The Whole Game\"，预览了整个 package 的开发过程。\n\n-   新的 @sec-setup，\"System setup\"，是从之前的简介中删除的，并获得了更多详细信息。\n\n-   以前称为 \"Package structure\" 的章节已扩展并分为两章，一章介绍包结构和状态（@sec-package-structure-state），另一章介绍工作流程和工具（@sec-workflow101）。\n\n-   新的 @sec-package-within，\"The package within\"，演示了如何从数据分析脚本中提取可重用逻辑并将其放入 package 中。\n\n-   @sec-r，\"R code\" 中的 \"Organising your functions\" 和 \"Code style\" 部分已被删除，取而代之的是在线风格指南，<https://style.tidyverse.org/>。该样式指南与新的 styler 包 [@styler] 配对，可以自动应用许多规则。\n\n-   测试的覆盖范围已扩展为三章：@sec-testing-basics 为 testing basics，@sec-testing-design 为 test suite design，@sec-testing-advanced 为 various advanced topics。\n\n-   围绕 `NAMESPACE` 文件和依赖关系的材料已重新组织为两章：@sec-dependencies-mindset-background 提供了思考依赖关系的技术背景，@sec-dependencies-in-practice 提供了在不同设置中使用不同类型依赖关系的实践说明。\n\n-   新的 @sec-license，\"Licensing\"，将之前有关许可的内容扩展为自己的章节。\n\n-   关于 C/C++ 的章节已被删除。它没有足够的信息来发挥作用，自本书第一版以来，出现了其他更好的学习资源。\n\n-   \"Other components\" 一章已被删除。\n\n-   关于 Git/GitHub 的章节已围绕软件开发实践这一更一般的主题进行了重新构建（@sec-sw-dev-practices）。这不再包括基本任务的分步说明。自第一版以来，Git/GitHub 的使用呈爆炸式增长，伴随着 R 通用和特定学习资源的爆炸式增长（e.g. the website [Happy Git and GitHub for the useR](https://happygitwithr.com/index.html)）。 Git/GitHub 仍然在整本书中占据突出地位，尤其是在 @sec-sw-dev-practices。\n\n-   非常短的 `inst` 章节已合并到 @sec-misc 中，所有其他目录在特定情景中可能很重要，但并非对所有包都至关重要。\n\n\n## Acknowledgments\n\n```{r eval = FALSE, include = FALSE}\n# code generates fodder for the prose below\nlibrary(desc)\n\nget_contributors <- function(pkg = \"devtools\") {\n  desc_get_authors(system.file(\"DESCRIPTION\", package = pkg))\n}\n# using packages represented by hex stickers in 2019 usethis useR! talk\n# team agreed that was the \"right\" set of packages\nget_contributors(\"devtools\")\nget_contributors(\"usethis\")\nget_contributors(\"roxygen2\")\nget_contributors(\"testthat\")\nget_contributors(\"desc\")\nget_contributors(\"pkgbuild\")\nget_contributors(\"pkgload\")\nget_contributors(\"rcmdcheck\")\nget_contributors(\"remotes\")\nget_contributors(\"revdepcheck\")\nget_contributors(\"sessioninfo\")\n```\n\n自 R Packages 第一版发布以来，支持此处描述的工作流程的包已经经历了广泛的开发。最初的 devtools、roxygen2 和 testthat 三重奏已扩展为包括由 devtools 的 \"conscious uncoupling\" 创建的包，如 @sec-setup-usage 所述。这些软件包大多数源自 Hadley Wickham (HW)，因为它们源于 devtools。还有许多其他重要的贡献者，其中许多人现在担任维护者：\n\n-   devtools: HW, [Winston Chang](https://github.com/wch), [Jim Hester](https://github.com/jimhester) (maintainer, \\>= v1.13.5), [Jennifer Bryan](https://github.com/jennybc) (maintainer \\>= v2.4.3)\n-   usethis: HW, [Jennifer Bryan](https://github.com/jennybc) (maintainer \\>= v1.5.0), Malcolm Barrett\n-   roxygen2: HW (maintainer), [Peter Danenburg](https://github.com/klutometis), [Manuel Eugster](https://github.com/mjaeugster)\n-   testthat: HW (maintainer)\n-   desc: [Gábor Csárdi](https://github.com/gaborcsardi) (maintainer), [Kirill Müller](https://github.com/krlmlr), [Jim Hester](https://github.com/jimhester)\n-   pkgbuild: HW, [Jim Hester](https://github.com/jimhester), [Gábor Csárdi](https://github.com/gaborcsardi) (maintainer \\>= v1.2.1)\n-   pkgload: HW, [Jim Hester](https://github.com/jimhester), [Winston Chang](https://github.com/wch), [Lionel Henry](https://github.com/lionel-) (maintainer \\>= v1.2.4)\n-   rcmdcheck: [Gábor Csárdi](https://github.com/gaborcsardi) (maintainer)\n-   remotes: HW, [Jim Hester](https://github.com/jimhester), [Gábor Csárdi](https://github.com/gaborcsardi) (maintainer), [Winston Chang](https://github.com/wch), [Martin Morgan](https://github.com/mtmorgan), [Dan Tenenbaum](https://github.com/dtenenba)\n-   revdepcheck: HW, [Gábor Csárdi](https://github.com/gaborcsardi) (maintainer)\n-   sessioninfo: HW, [Gábor Csárdi](https://github.com/gaborcsardi) (maintainer), [Winston Chang](https://github.com/wch), [Robert Flight](https://github.com/rmflight), [Kirill Müller](https://github.com/krlmlr), [Jim Hester](https://github.com/jimhester)\n\n这本书是 [written and revised in the open](https://github.com/hadley/r-pkgs/)，它确实是社区的努力：许多人阅读草稿，修复拼写错误，提出改进建议并贡献内容。如果没有这些贡献者，这本书就不会这么好，我们非常感谢他们的帮助。我们感谢 Posit 的同事，尤其是 tidyverse 团队，他们一直热衷于讨论包开发实践。本书得到了极大的改进，在我们出色的技术审稿团队的建议下：Malcolm Barrett、Laura DeCicco、Zhian Kamvar、Tom Mock 和 Maëlle Salmon。\n\n```{r, results = \"asis\", echo = FALSE, eval = TRUE}\nlibrary(tidyverse)  \n\ndat <- read_csv(\"data/contribs.csv\", na = \"NA\", trim_ws = FALSE) |> \n  mutate(link = str_glue(\"[&#x0040;{user}](https://github.com/{user}){maybe_name}\"))\n\ncontrib_string <- dat |> \n  pull(link) |> \n  str_flatten_comma()\n\nstr_glue('\n  Thanks to all contributors the the first and second editions (in \\\\\n  alphabetical order by GitHub username): \n  \n  {contrib_string}.')\n```\n\n## Conventions\n\n在本书中，我们用 `fun()` 来引用函数，用 `var` 来引用变量和函数参数，用 `path/` 来引用路径。\n\n较大的代码块混合输入和输出。输出带有注释，因此如果您有本书的电子版本，例如 <https://r-pkgs.org>，您可以轻松地将示例复制并粘贴到 R 中。输出注释看起来像 `#>` 以将其与常规注释区分开。\n\n## Colophon\n\n本书是使用 RStudio 中的 [Quarto](https://quarto.org) 编写的。该 [website](https://r-pkgs.org) 由 [Netlify](https://www.netlify.com) 托管，并在每次 GitHub 操作提交后自动更新。完整的源代码可以从 [GitHub](https://github.com/hadley/r-pkgs) 获取。\n\n本书的这个版本是用以下内容构建的：\n\n```{r}\nlibrary(devtools)\nlibrary(roxygen2)\nlibrary(testthat)\ndevtools::session_info()\n```\n"},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":true,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","include-in-header":["plausible.html"],"output-file":"preface.html"},"language":{},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.2.475","bibliography":["book.bib"],"editor":"source","mainfont":"Microsoft Yahei","theme":["cosmo","custom.scss"]},"extensions":{"book":{"multiFile":true}}}}}